import{css as n,LitElement as e,html as t}from"lit-element";function i(n,e,t,i,r,a,s){try{var o=n[a](s),d=o.value}catch(n){return void t(n)}o.done?e(d):Promise.resolve(d).then(i,r)}function r(n){return function(){var e=this,t=arguments;return new Promise((function(r,a){var s=n.apply(e,t);function o(n){i(s,r,a,o,d,"next",n)}function d(n){i(s,r,a,o,d,"throw",n)}o(void 0)}))}}function a(n,e,t){return(e=function(n){var e=function(n,e){if("object"!=typeof n||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function d(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var l,h,c,m,g,u=n(l||(l=d(['\n  /* CSS Custom Properties (Variables) */\n  :host {\n    /* Colors */\n    --color-primary: #333333;\n    --color-primary-light: #666666;\n    --color-primary-dark: #000000;\n    --color-background: #ffffff;\n    --color-background-translucent: rgba(255, 255, 255, 0.95);\n    --color-error: #ff3b30;\n    --color-success: #34c759;\n    --color-warning: #ffcc00;\n    --color-text: #333333;\n    --color-text-secondary: #666666;\n    --color-border: #e0e0e0;\n    --color-shadow: rgba(0, 0, 0, 0.1);\n\n    /* Typography */\n    --font-family-primary: "Product Sans Regular", "Rubik", sans-serif;\n    --font-weight-light: 300;\n    --font-weight-regular: 400;\n    --font-weight-medium: 500;\n    --font-weight-bold: 600;\n    --font-size-small: 14px;\n    --font-size-regular: 16px;\n    --font-size-large: 18px;\n    --font-size-xlarge: 24px;\n    --font-size-xxlarge: 32px;\n    --line-height-tight: 1.2;\n    --line-height-normal: 1.5;\n    --line-height-loose: 1.8;\n\n    /* Spacing */\n    --spacing-xxsmall: 4px;\n    --spacing-xsmall: 8px;\n    --spacing-small: 12px;\n    --spacing-medium: 16px;\n    --spacing-large: 24px;\n    --spacing-xlarge: 32px;\n    --spacing-xxlarge: 48px;\n\n    /* Borders */\n    --border-radius-small: 4px;\n    --border-radius-medium: 8px;\n    --border-radius-large: 16px;\n    --border-radius-xlarge: 24px;\n    --border-width-thin: 1px;\n    --border-width-regular: 2px;\n    --border-width-thick: 4px;\n\n    /* Shadows */\n    --shadow-small: 0 2px 4px var(--color-shadow);\n    --shadow-medium: 0 4px 8px var(--color-shadow);\n    --shadow-large: 0 8px 16px var(--color-shadow);\n    --shadow-xlarge: 0 12px 24px var(--color-shadow);\n\n    /* Transitions */\n    --transition-duration-fast: 0.15s;\n    --transition-duration-normal: 0.3s;\n    --transition-duration-slow: 0.5s;\n    --transition-timing: ease-in-out;\n\n    /* Z-index */\n    --z-index-base: 1;\n    --z-index-overlay: 1000;\n    --z-index-modal: 2000;\n    --z-index-tooltip: 3000;\n    --z-index-maximum: 9999;\n\n    /* Component-specific */\n    --overlay-height: 120px;\n    --icon-size-small: 24px;\n    --icon-size-medium: 36px;\n    --icon-size-large: 48px;\n    --header-height: 60px;\n    --footer-height: 80px;\n  }\n\n  /* Base Styles */\n  * {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n  }\n\n  /* Typography Reset */\n  h1, h2, h3, h4, h5, h6, p {\n    margin: 0;\n    font-weight: var(--font-weight-regular);\n  }\n\n  /* Common Text Styles */\n  .text-small {\n    font-size: var(--font-size-small);\n    line-height: var(--line-height-tight);\n  }\n\n  .text-regular {\n    font-size: var(--font-size-regular);\n    line-height: var(--line-height-normal);\n  }\n\n  .text-large {\n    font-size: var(--font-size-large);\n    line-height: var(--line-height-normal);\n  }\n\n  /* Common Layout Classes */\n  .flex {\n    display: flex;\n  }\n\n  .flex-column {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .flex-center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .flex-between {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .flex-around {\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n  }\n\n  .flex-grow {\n    flex-grow: 1;\n  }\n\n  /* Common Spacing Classes */\n  .m-0 { margin: 0; }\n  .p-0 { padding: 0; }\n  .m-1 { margin: var(--spacing-xsmall); }\n  .p-1 { padding: var(--spacing-xsmall); }\n  .m-2 { margin: var(--spacing-small); }\n  .p-2 { padding: var(--spacing-small); }\n  .m-3 { margin: var(--spacing-medium); }\n  .p-3 { padding: var(--spacing-medium); }\n  .m-4 { margin: var(--spacing-large); }\n  .p-4 { padding: var(--spacing-large); }\n\n  /* Common Animation Classes */\n  .fade-in {\n    animation: fadeIn var(--transition-duration-normal) var(--transition-timing);\n  }\n\n  .fade-out {\n    animation: fadeOut var(--transition-duration-normal) var(--transition-timing);\n  }\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n\n  @keyframes fadeOut {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n\n  /* Common Utility Classes */\n  .hidden {\n    display: none !important;\n  }\n\n  .invisible {\n    visibility: hidden !important;\n  }\n\n  .truncate {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .no-select {\n    user-select: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n  }\n\n  /* Accessibility */\n  .screen-reader-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n\n  /* Focus States */\n  :focus-visible {\n    outline: var(--border-width-regular) solid var(--color-primary);\n    outline-offset: var(--border-width-thin);\n  }\n\n  /* Dark Mode */\n  @media (prefers-color-scheme: dark) {\n    :host {\n      --color-primary: #ffffff;\n      --color-primary-light: #cccccc;\n      --color-primary-dark: #999999;\n      --color-background: #000000;\n      --color-background-translucent: rgba(0, 0, 0, 0.95);\n      --color-text: #ffffff;\n      --color-text-secondary: #cccccc;\n      --color-border: #333333;\n      --color-shadow: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  /* High Contrast Mode */\n  @media (prefers-contrast: more) {\n    :host {\n      --color-primary: #000000;\n      --color-background: #ffffff;\n      --color-text: #000000;\n      --color-border: #000000;\n      --shadow-small: none;\n      --shadow-medium: none;\n      --shadow-large: none;\n      --shadow-xlarge: none;\n    }\n  }\n\n  /* Reduced Motion */\n  @media (prefers-reduced-motion: reduce) {\n    * {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n      scroll-behavior: auto !important;\n    }\n  }\n\n  /* Print Styles */\n  @media print {\n    :host {\n      --color-primary: #000000;\n      --color-background: #ffffff;\n      --color-text: #000000;\n      --shadow-small: none;\n      --shadow-medium: none;\n      --shadow-large: none;\n      --shadow-xlarge: none;\n    }\n  }\n\n  /* RTL Support */\n  :host([dir="rtl"]) {\n    direction: rtl;\n  }\n\n  /* Touch Device Optimization */\n  @media (hover: none) {\n    :host {\n      --spacing-small: 16px;\n      --spacing-medium: 20px;\n      --spacing-large: 28px;\n    }\n  }\n']))),p=n(h||(h=d(["\n  :host {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: black;\n  }\n\n  /* Background Container */\n  .background-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: black;\n    z-index: 1;\n  }\n\n  /* Background Images */\n  .background-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n    will-change: opacity;\n    transition-property: opacity;\n    transition-timing-function: ease-in-out;\n  }\n\n  /* Image Fit Options */\n  .background-image.cover {\n    background-size: cover;\n  }\n\n  .background-image.contain {\n    background-size: contain;\n  }\n\n  .background-image.fill {\n    background-size: 100% 100%;\n  }\n\n  .background-image.scale-down {\n    background-size: contain;\n    background-position: center;\n  }\n\n  /* Loading States */\n  .background-image.loading {\n    opacity: 0;\n  }\n\n  .background-image.loaded {\n    opacity: 1;\n  }\n\n  /* Transition Effects */\n  .background-image.fade {\n    transition-duration: var(--crossfade-time, 3s);\n  }\n\n  .background-image.slide {\n    transition-property: opacity, transform;\n    transition-duration: var(--crossfade-time, 3s);\n  }\n\n  .background-image.slide.slide-left {\n    transform: translateX(-100%);\n  }\n\n  .background-image.slide.slide-right {\n    transform: translateX(100%);\n  }\n\n  /* Error States */\n  .error-message {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: rgba(0, 0, 0, 0.8);\n    color: #ff4444;\n    padding: 1rem;\n    border-radius: 0.5rem;\n    font-size: 1rem;\n    text-align: center;\n    z-index: 2;\n    max-width: 80%;\n  }\n\n  /* Loading Indicator */\n  .loading-indicator {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 50px;\n    height: 50px;\n    border: 3px solid rgba(255, 255, 255, 0.3);\n    border-radius: 50%;\n    border-top-color: #ffffff;\n    animation: spin 1s ease-in-out infinite;\n    z-index: 2;\n  }\n\n  @keyframes spin {\n    to {\n      transform: translate(-50%, -50%) rotate(360deg);\n    }\n  }\n\n  /* Overlay Gradients */\n  .background-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n    pointer-events: none;\n  }\n\n  .gradient-top {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 150px;\n    background: linear-gradient(\n      to bottom,\n      rgba(0, 0, 0, 0.5) 0%,\n      rgba(0, 0, 0, 0) 100%\n    );\n  }\n\n  .gradient-bottom {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 150px;\n    background: linear-gradient(\n      to top,\n      rgba(0, 0, 0, 0.5) 0%,\n      rgba(0, 0, 0, 0) 100%\n    );\n  }\n\n  /* High DPI Screen Optimizations */\n  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n    .background-image {\n      transform: translateZ(0);\n      backface-visibility: hidden;\n    }\n  }\n\n  /* Reduced Motion Preferences */\n  @media (prefers-reduced-motion: reduce) {\n    .background-image {\n      transition-duration: 0.5s !important;\n    }\n  }\n\n  /* Dark Mode Adjustments */\n  @media (prefers-color-scheme: dark) {\n    .error-message {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n  }\n\n  /* Performance Optimizations */\n  .hardware-accelerated {\n    transform: translateZ(0);\n    will-change: transform;\n  }\n\n  /* Image Position Variants */\n  .background-image.top {\n    background-position: center top;\n  }\n\n  .background-image.bottom {\n    background-position: center bottom;\n  }\n\n  .background-image.left {\n    background-position: left center;\n  }\n\n  .background-image.right {\n    background-position: right center;\n  }\n\n  /* Filter Effects */\n  .background-image.blur {\n    filter: blur(5px);\n  }\n\n  .background-image.brightness {\n    filter: brightness(0.8);\n  }\n\n  .background-image.contrast {\n    filter: contrast(1.2);\n  }\n\n  /* Animation Classes */\n  .zoom-in {\n    animation: zoomIn 20s ease-in-out infinite;\n  }\n\n  .zoom-out {\n    animation: zoomOut 20s ease-in-out infinite;\n  }\n\n  .pan-left {\n    animation: panLeft 30s linear infinite;\n  }\n\n  .pan-right {\n    animation: panRight 30s linear infinite;\n  }\n\n  @keyframes zoomIn {\n    from {\n      transform: scale(1);\n    }\n    to {\n      transform: scale(1.1);\n    }\n  }\n\n  @keyframes zoomOut {\n    from {\n      transform: scale(1.1);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n\n  @keyframes panLeft {\n    from {\n      background-position: 100% center;\n    }\n    to {\n      background-position: 0% center;\n    }\n  }\n\n  @keyframes panRight {\n    from {\n      background-position: 0% center;\n    }\n    to {\n      background-position: 100% center;\n    }\n  }\n\n  /* Responsive Design */\n  @media screen and (max-width: 768px) {\n    .gradient-top,\n    .gradient-bottom {\n      height: 100px;\n    }\n  }\n\n  @media screen and (max-width: 480px) {\n    .gradient-top,\n    .gradient-bottom {\n      height: 75px;\n    }\n\n    .error-message {\n      font-size: 0.875rem;\n      padding: 0.75rem;\n    }\n  }\n\n  /* Print Styles */\n  @media print {\n    .background-container {\n      display: none;\n    }\n  }\n\n  /* Accessibility */\n  @media (prefers-reduced-motion: reduce) {\n    .zoom-in,\n    .zoom-out,\n    .pan-left,\n    .pan-right {\n      animation: none;\n    }\n  }\n\n  /* Focus States */\n  :host(:focus-within) .background-container {\n    outline: 2px solid #ffffff;\n    outline-offset: -2px;\n  }\n\n  /* Error States */\n  :host([has-error]) .background-container {\n    background-color: #ff000020;\n  }\n"]))),f=1e4,b=1e3,v=50,x=100,y=128,w=255,I=1,k=10,T=1,C=50,S=100,z=0,D=10,B=50,A={max:50,color:"#68a03a"},E={max:100,color:"#f9bf33"},U={max:150,color:"#f47c06"},M={max:200,color:"#c43828"},O={max:300,color:"#ab1457"},_={color:"#83104c"},V={"clear-night":"clear-night",cloudy:"cloudy",fog:"fog",hail:"hail",lightning:"thunderstorms","lightning-rainy":"thunderstorms-rain",partlycloudy:"partly-cloudy-day",pouring:"rain",rainy:"drizzle",snowy:"snow","snowy-rainy":"sleet",sunny:"clear-day",windy:"wind","windy-variant":"wind",exceptional:"not-available",default:"not-available-fill"},P="media-source",q="unsplash-api",L="immich-api",N="picsum",j="url",R={image_url:"",display_time:15,crossfade_time:3,image_fit:"contain",image_list_update_interval:3600,image_order:"sorted",show_debug:!1,sensor_update_delay:500},W="weather.64_west_glen_ave",Y="sensor.ridgewood_air_quality_index",F="sensor.liam_room_display_light_sensor",H={weekday:"short",month:"short",day:"numeric"},X={hour:"numeric",minute:"2-digit",hour12:!0};customElements.define("background-rotator",class extends e{static get properties(){return{imageA:{type:String},imageB:{type:String},activeImage:{type:String},preloadedImage:{type:String},isTransitioning:{type:Boolean},crossfadeTime:{type:Number},screenWidth:{type:Number},screenHeight:{type:Number},config:{type:Object},error:{type:String},imageList:{type:Array},currentImageIndex:{type:Number}}}constructor(){super(),this.initializeProperties(),this.boundUpdateScreenSize=this.updateScreenSize.bind(this)}initializeProperties(){this.imageA="",this.imageB="",this.activeImage="A",this.preloadedImage="",this.isTransitioning=!1,this.crossfadeTime=R.crossfade_time,this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.error=null,this.imageList=[],this.currentImageIndex=-1,this.imageUpdateInterval=null,this.imageListUpdateInterval=null}static get styles(){return p}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.boundUpdateScreenSize),this.startImageRotation()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.boundUpdateScreenSize),this.clearTimers()}clearTimers(){this.imageUpdateInterval&&clearInterval(this.imageUpdateInterval),this.imageListUpdateInterval&&clearInterval(this.imageListUpdateInterval)}updateScreenSize(){var n=window.devicePixelRatio||1;this.screenWidth=Math.round(window.innerWidth*n),this.screenHeight=Math.round(window.innerHeight*n),this.requestUpdate()}startImageRotation(){var n=this;return r((function*(){var e;yield n.updateImage(),n.imageUpdateInterval=setInterval((()=>{n.updateImage()}),1e3*((null===(e=n.config)||void 0===e?void 0:e.display_time)||R.display_time))}))()}updateImage(){var n=this;return r((function*(){if(!n.isTransitioning)try{var e=yield n.getNextImage();yield n.transitionToNewImage(e),n.preloadNextImage()}catch(e){console.error("Error updating image:",e),n.error="Error updating image: ".concat(e.message),n.requestUpdate()}}))()}getNextImage(){var n=this;return r((function*(){if(n.preloadedImage){var e=n.preloadedImage;return n.preloadedImage="",e}if(0===n.imageList.length)throw new Error("No images available");return n.currentImageIndex=(n.currentImageIndex+1)%n.imageList.length,n.imageList[n.currentImageIndex]}))()}preloadImage(n){return r((function*(){return new Promise(((e,t)=>{var i=new Image;i.onload=()=>e(n),i.onerror=()=>t(new Error("Failed to load image: ".concat(n))),i.src=n}))}))()}preloadNextImage(){var n=this;return r((function*(){try{var e=(n.currentImageIndex+1)%n.imageList.length,t=n.imageList[e];n.preloadedImage=yield n.preloadImage(t)}catch(e){console.error("Error preloading next image:",e),n.preloadedImage=""}}))()}transitionToNewImage(n){var e=this;return r((function*(){e.isTransitioning=!0,"A"===e.activeImage?(e.imageB=n,yield e.updateComplete,yield new Promise((n=>setTimeout(n,v))),e.activeImage="B"):(e.imageA=n,yield e.updateComplete,yield new Promise((n=>setTimeout(n,v))),e.activeImage="A"),yield new Promise((n=>setTimeout(n,1e3*e.crossfadeTime+v))),e.isTransitioning=!1,e.requestUpdate()}))()}getBackgroundSize(){var n;return(null===(n=this.config)||void 0===n?void 0:n.image_fit)||R.image_fit}getImageStyle(n,e){return{"background-image":"url('".concat(n,"')"),opacity:e,"background-size":this.getBackgroundSize(),transition:"opacity ".concat(this.crossfadeTime,"s ease-in-out")}}styleMap(n){return Object.entries(n).map((n=>{var[e,t]=n;return"".concat(e,": ").concat(t)})).join("; ")}render(){var n="A"===this.activeImage?1:0,e="B"===this.activeImage?1:0;return t(c||(c=d(['\n      <div class="background-container">\n        ','\n        \n        <div \n          class="background-image" \n          style="','">\n        </div>\n        \n        <div \n          class="background-image" \n          style="','">\n        </div>\n      </div>\n    '])),this.error?t(m||(m=d(['\n          <div class="error-message">\n            ',"\n          </div>\n        "])),this.error):"",this.styleMap(this.getImageStyle(this.imageA,n)),this.styleMap(this.getImageStyle(this.imageB,e)))}setImageList(n){this.imageList=n,this.currentImageIndex=-1,this.requestUpdate()}setCrossfadeTime(n){this.crossfadeTime=n,this.requestUpdate()}setConfig(n){this.config=n,this.requestUpdate()}forceImageUpdate(){var n=this;return r((function*(){yield n.updateImage()}))()}pauseRotation(){this.clearTimers()}resumeRotation(){this.startImageRotation()}handleError(n){this.error=n.message,this.requestUpdate();var e=new CustomEvent("background-error",{detail:{error:n},bubbles:!0,composed:!0});this.dispatchEvent(e)}clearError(){this.error=null,this.requestUpdate()}});var Q,G,$,Z,J,K,nn=n(g||(g=d(['\n  :host {\n    display: block;\n    position: relative;\n    font-family: "Product Sans Regular", "Rubik", sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  /* Main Container */\n  .weather-component {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    color: white;\n    width: 100%;\n    max-width: 400px;\n    padding: 10px;\n    box-sizing: border-box;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n\n  /* Left Column - Date & Time */\n  .left-column {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    overflow: hidden;\n  }\n\n  .date {\n    font-size: 25px;\n    margin-bottom: 5px;\n    font-weight: 400;\n    margin-left: 10px;\n    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.5);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    transition: font-size 0.3s ease;\n  }\n\n  .time {\n    font-size: 90px;\n    line-height: 1;\n    font-weight: 500;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\n    margin-left: 8px;\n    transition: font-size 0.3s ease;\n  }\n\n  /* Right Column - Weather & AQI */\n  .right-column {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    min-width: 120px;\n  }\n\n  /* Weather Info Section */\n  .weather-info {\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    font-weight: 500;\n    margin-right: -5px;\n    transition: all 0.3s ease;\n  }\n\n  .weather-icon {\n    width: 50px;\n    height: 50px;\n    margin-right: 8px;\n    filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.3));\n    transition: all 0.3s ease;\n  }\n\n  .weather-icon.loading {\n    opacity: 0.5;\n    animation: pulse 1.5s infinite;\n  }\n\n  .temperature {\n    font-size: 35px;\n    font-weight: 500;\n    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.5);\n    transition: font-size 0.3s ease;\n  }\n\n  /* AQI Section */\n  .aqi {\n    font-size: 20px;\n    padding: 7px 10px 5px;\n    border-radius: 8px;\n    font-weight: 500;\n    margin-top: 2px;\n    margin-left: 25px;\n    align-self: flex-end;\n    min-width: 70px;\n    text-align: center;\n    transition: all 0.3s ease;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n\n  /* AQI Color Classes */\n  .aqi.good {\n    background-color: #68a03a;\n  }\n\n  .aqi.moderate {\n    background-color: #f9bf33;\n  }\n\n  .aqi.unhealthy-sensitive {\n    background-color: #f47c06;\n  }\n\n  .aqi.unhealthy {\n    background-color: #c43828;\n  }\n\n  .aqi.very-unhealthy {\n    background-color: #ab1457;\n  }\n\n  .aqi.hazardous {\n    background-color: #83104c;\n  }\n\n  /* Loading States */\n  @keyframes pulse {\n    0% {\n      opacity: 0.5;\n    }\n    50% {\n      opacity: 0.8;\n    }\n    100% {\n      opacity: 0.5;\n    }\n  }\n\n  .loading {\n    opacity: 0.7;\n    animation: pulse 1.5s infinite;\n  }\n\n  /* Error States */\n  .error-message {\n    background-color: rgba(255, 59, 48, 0.9);\n    color: white;\n    padding: 8px 12px;\n    border-radius: 6px;\n    font-size: 14px;\n    margin-top: 8px;\n    text-align: center;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n\n  /* Weather Description */\n  .weather-description {\n    font-size: 16px;\n    margin-top: 4px;\n    opacity: 0.9;\n    text-align: right;\n  }\n\n  /* Hover Effects */\n  .weather-info:hover .weather-icon {\n    transform: scale(1.1);\n  }\n\n  .aqi:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\n  }\n\n  /* Animations */\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      transform: translateY(10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .fade-in {\n    animation: fadeIn 0.3s ease forwards;\n  }\n\n  /* Responsive Design */\n  @media (max-width: 480px) {\n    .weather-component {\n      padding: 8px;\n      max-width: 100%;\n    }\n\n    .date {\n      font-size: 20px;\n      margin-left: 8px;\n    }\n\n    .time {\n      font-size: 70px;\n      margin-left: 6px;\n    }\n\n    .weather-icon {\n      width: 40px;\n      height: 40px;\n    }\n\n    .temperature {\n      font-size: 28px;\n    }\n\n    .aqi {\n      font-size: 16px;\n      padding: 5px 8px 4px;\n      margin-left: 15px;\n      min-width: 60px;\n    }\n  }\n\n  @media (max-width: 360px) {\n    .date {\n      font-size: 18px;\n    }\n\n    .time {\n      font-size: 60px;\n    }\n\n    .weather-icon {\n      width: 35px;\n      height: 35px;\n    }\n\n    .temperature {\n      font-size: 24px;\n    }\n\n    .aqi {\n      font-size: 14px;\n      min-width: 50px;\n    }\n  }\n\n  /* High Contrast Mode */\n  @media (prefers-contrast: more) {\n    .weather-component {\n      text-shadow: none;\n    }\n\n    .aqi {\n      border: 2px solid rgba(255, 255, 255, 0.8);\n    }\n  }\n\n  /* Reduced Motion */\n  @media (prefers-reduced-motion: reduce) {\n    .weather-info:hover .weather-icon {\n      transform: none;\n    }\n\n    .aqi:hover {\n      transform: none;\n    }\n\n    .loading {\n      animation: none;\n      opacity: 0.7;\n    }\n  }\n\n  /* Print Styles */\n  @media print {\n    .weather-component {\n      color: black;\n      text-shadow: none;\n    }\n\n    .aqi {\n      print-color-adjust: exact;\n      -webkit-print-color-adjust: exact;\n    }\n  }\n\n  /* Dark Mode Adjustments */\n  @media (prefers-color-scheme: dark) {\n    .error-message {\n      background-color: rgba(255, 59, 48, 0.7);\n    }\n  }\n\n  /* Focus States for Accessibility */\n  :host(:focus-within) {\n    outline: 2px solid white;\n    outline-offset: 2px;\n  }\n\n  /* RTL Support */\n  :host([dir="rtl"]) {\n    .left-column {\n      align-items: flex-end;\n    }\n\n    .right-column {\n      align-items: flex-start;\n    }\n\n    .date,\n    .time {\n      margin-left: 0;\n      margin-right: 10px;\n    }\n\n    .aqi {\n      margin-left: 0;\n      margin-right: 25px;\n    }\n\n    .weather-info {\n      margin-right: 0;\n      margin-left: -5px;\n    }\n  }\n\n  /* Utility Classes */\n  .hidden {\n    display: none !important;\n  }\n\n  .invisible {\n    visibility: hidden !important;\n  }\n\n  .no-wrap {\n    white-space: nowrap;\n  }\n\n  .truncate {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n'])));customElements.define("weather-display",class extends e{static get properties(){return{hass:{type:Object},date:{type:String},time:{type:String},temperature:{type:String},weatherIcon:{type:String},weatherState:{type:String},aqi:{type:String},lastUpdate:{type:Number},error:{type:String}}}constructor(){super(),this.initializeProperties()}initializeProperties(){this.date="",this.time="",this.temperature="",this.weatherIcon=V.default,this.weatherState="",this.aqi="",this.lastUpdate=0,this.error=null,this.updateTimer=null}static get styles(){return nn}connectedCallback(){super.connectedCallback(),this.startUpdates()}disconnectedCallback(){super.disconnectedCallback(),this.stopUpdates()}startUpdates(){this.updateWeather(),this.updateDateTime(),this.updateTimer=setInterval((()=>{this.updateDateTime(),Date.now()-this.lastUpdate>=6e4&&this.updateWeather()}),1e3)}stopUpdates(){this.updateTimer&&(clearInterval(this.updateTimer),this.updateTimer=null)}updated(n){n.has("hass")&&this.hass&&this.updateWeather()}updateDateTime(){var n=new Date;this.date=n.toLocaleDateString("en-US",H),this.time=n.toLocaleTimeString("en-US",X).replace(/\s?[AP]M/,""),this.requestUpdate()}updateWeather(){if(this.hass){try{this.updateWeatherData(),this.updateAQIData(),this.lastUpdate=Date.now(),this.error=null}catch(n){console.error("Error updating weather data:",n),this.error="Error updating weather data"}this.requestUpdate()}else this.error="Home Assistant not available"}updateWeatherData(){var n=this.hass.states[W];if(!n)throw new Error("Weather entity not available");var e=n.attributes.temperature;this.temperature="".concat(Math.round(e),"°"),this.weatherState=n.state,this.weatherIcon=this.getWeatherIcon(n.state)}updateAQIData(){var n=this.hass.states[Y];if(!n)throw new Error("AQI entity not available");this.aqi=n.state}getWeatherIcon(n){return V[n]||V.default}getAqiColor(n){var e=parseInt(n);return isNaN(e)?_.color:e<=A.max?A.color:e<=E.max?E.color:e<=U.max?U.color:e<=M.max?M.color:e<=O.max?O.color:_.color}getAqiDescription(n){var e=parseInt(n);return isNaN(e)?"Unknown":e<=A.max?"Good":e<=E.max?"Moderate":e<=U.max?"Unhealthy for Sensitive Groups":e<=M.max?"Unhealthy":e<=O.max?"Very Unhealthy":"Hazardous"}handleWeatherIconError(n){console.error("Error loading weather icon"),n.target.src="https://basmilius.github.io/weather-icons/production/fill/all/".concat(V.default,".svg")}renderDateTime(){return t(Q||(Q=d(['\n      <div class="left-column">\n        <div class="date">','</div>\n        <div class="time">',"</div>\n      </div>\n    "])),this.date,this.time)}renderWeatherInfo(){return t(G||(G=d(['\n      <div class="weather-info">\n        <img \n          src="https://basmilius.github.io/weather-icons/production/fill/all/','.svg"\n          class="weather-icon"\n          alt="Weather icon for ','"\n          @error=','>\n        <span class="temperature">',"</span>\n      </div>\n    "])),this.weatherIcon,this.weatherState,this.handleWeatherIconError,this.temperature)}renderAQI(){if(!this.aqi)return null;var n=this.getAqiColor(this.aqi),e=this.getAqiDescription(this.aqi);return t($||($=d(['\n      <div \n        class="aqi" \n        style="background-color: ','"\n        title="','">\n        '," AQI\n      </div>\n    "])),n,e,this.aqi)}renderError(){return this.error?t(Z||(Z=d(['\n      <div class="error-message">\n        ',"\n      </div>\n    "])),this.error):null}render(){return t(J||(J=d(['\n      <link href="https://fonts.googleapis.com/css2?family=Product+Sans:wght@400;500&display=swap" rel="stylesheet">\n      <div class="weather-component">\n        ','\n        <div class="right-column">\n          ',"\n          ","\n        </div>\n        ","\n      </div>\n    "])),this.renderDateTime(),this.renderWeatherInfo(),this.renderAQI(),this.renderError())}forceUpdate(){this.updateWeather(),this.updateDateTime()}updateTime(){this.updateDateTime()}refreshWeather(){this.updateWeather()}});var en,tn,rn,an,sn=n(K||(K=d(['\n  :host {\n    display: block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: black;\n    z-index: 1000;\n    font-family: "Product Sans Regular", "Rubik", sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  /* Main Container */\n  .night-mode {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    background-color: black;\n    transition: background-color 0.5s ease-in-out;\n    user-select: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n  }\n\n  /* Time Display */\n  .night-time {\n    color: white;\n    font-size: 35vw;\n    font-weight: 400;\n    line-height: 1;\n    text-align: center;\n    opacity: 0.7;\n    transition: opacity 2s ease-in-out, font-size 0.3s ease-in-out;\n    margin: 0;\n    padding: 0;\n    letter-spacing: -0.02em;\n    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.1);\n  }\n\n  /* Fade Animation */\n  .night-time.fade-dim {\n    opacity: 0.4;\n    transition: opacity 2s ease-in-out;\n  }\n\n  /* Error Message */\n  .error-message {\n    position: absolute;\n    bottom: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: rgba(255, 59, 48, 0.8);\n    color: white;\n    padding: 8px 16px;\n    border-radius: 8px;\n    font-size: 14px;\n    opacity: 0;\n    transition: opacity 0.3s ease-in-out;\n    text-align: center;\n    max-width: 80%;\n  }\n\n  .error-message.visible {\n    opacity: 1;\n  }\n\n  /* Touch Feedback */\n  .touch-indicator {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.3s ease-in-out;\n    background: radial-gradient(\n      circle at var(--touch-x, 50%) var(--touch-y, 50%),\n      rgba(255, 255, 255, 0.1) 0%,\n      transparent 60%\n    );\n  }\n\n  .touch-indicator.active {\n    opacity: 1;\n  }\n\n  /* Swipe Hint */\n  .swipe-hint {\n    position: absolute;\n    bottom: 40px;\n    left: 50%;\n    transform: translateX(-50%);\n    color: rgba(255, 255, 255, 0.3);\n    font-size: 16px;\n    opacity: 0;\n    transition: opacity 0.3s ease-in-out;\n  }\n\n  .swipe-hint.visible {\n    opacity: 1;\n    animation: fadeInOut 3s infinite;\n  }\n\n  /* Exit Animation */\n  .night-mode.exiting {\n    animation: fadeOut 0.5s ease-in-out forwards;\n  }\n\n  /* Entry Animation */\n  .night-mode.entering {\n    animation: fadeIn 0.5s ease-in-out forwards;\n  }\n\n  /* Animations */\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  @keyframes fadeOut {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n\n  @keyframes fadeInOut {\n    0%, 100% {\n      opacity: 0;\n    }\n    50% {\n      opacity: 1;\n    }\n  }\n\n  @keyframes pulse {\n    0%, 100% {\n      opacity: 0.7;\n    }\n    50% {\n      opacity: 0.4;\n    }\n  }\n\n  /* Loading State */\n  .loading {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 40px;\n    height: 40px;\n    border: 3px solid rgba(255, 255, 255, 0.1);\n    border-top-color: white;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to {\n      transform: translate(-50%, -50%) rotate(360deg);\n    }\n  }\n\n  /* Responsive Design */\n  @media (max-width: 768px) {\n    .night-time {\n      font-size: 45vw;\n    }\n  }\n\n  @media (max-width: 480px) {\n    .night-time {\n      font-size: 55vw;\n    }\n\n    .swipe-hint {\n      bottom: 30px;\n      font-size: 14px;\n    }\n  }\n\n  @media (max-height: 480px) {\n    .night-time {\n      font-size: 25vh;\n    }\n  }\n\n  /* High Contrast Mode */\n  @media (prefers-contrast: more) {\n    .night-time {\n      opacity: 1;\n      text-shadow: none;\n    }\n\n    .night-time.fade-dim {\n      opacity: 0.8;\n    }\n  }\n\n  /* Reduced Motion */\n  @media (prefers-reduced-motion: reduce) {\n    .night-time {\n      transition: none;\n    }\n\n    .night-time.fade-dim {\n      transition: none;\n    }\n\n    .swipe-hint {\n      animation: none;\n    }\n\n    .night-mode.entering,\n    .night-mode.exiting {\n      animation: none;\n    }\n  }\n\n  /* Dark Mode Optimization */\n  @media (prefers-color-scheme: dark) {\n    .night-mode {\n      background-color: #000000;\n    }\n\n    .night-time {\n      opacity: 0.8;\n    }\n\n    .night-time.fade-dim {\n      opacity: 0.5;\n    }\n  }\n\n  /* RTL Support */\n  :host([dir="rtl"]) {\n    .swipe-hint {\n      transform: translateX(50%);\n    }\n\n    .error-message {\n      transform: translateX(50%);\n    }\n  }\n\n  /* Print Mode */\n  @media print {\n    .night-mode {\n      background-color: white !important;\n    }\n\n    .night-time {\n      color: black !important;\n      opacity: 1 !important;\n      text-shadow: none !important;\n    }\n\n    .swipe-hint,\n    .error-message,\n    .touch-indicator {\n      display: none !important;\n    }\n  }\n\n  /* Landscape Mode */\n  @media (orientation: landscape) and (max-height: 500px) {\n    .night-time {\n      font-size: 25vh;\n    }\n\n    .swipe-hint {\n      bottom: 20px;\n    }\n  }\n\n  /* Touch Screen Optimization */\n  @media (hover: none) {\n    .touch-indicator {\n      display: none;\n    }\n  }\n\n  /* Accessibility */\n  .screen-reader-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n\n  /* Focus States */\n  :host(:focus-within) .night-mode {\n    outline: 2px solid white;\n    outline-offset: -2px;\n  }\n\n  /* Battery Optimization */\n  @media (prefers-reduced-data: reduce) {\n    .night-time {\n      text-shadow: none;\n    }\n  }\n'])));customElements.define("night-mode",class extends e{static get properties(){return{currentTime:{type:String},brightness:{type:Number},isAnimating:{type:Boolean},error:{type:String}}}constructor(){super(),this.initializeProperties()}initializeProperties(){this.currentTime=this.formatTime(new Date),this.brightness=T,this.isAnimating=!1,this.error=null,this.updateTimer=null,this.fadeTimer=null}static get styles(){return sn}connectedCallback(){super.connectedCallback(),this.startTimeUpdate(),this.startFadeAnimation()}disconnectedCallback(){super.disconnectedCallback(),this.stopTimeUpdate(),this.stopFadeAnimation()}startTimeUpdate(){this.updateTime(),this.updateTimer=setInterval((()=>{this.updateTime()}),1e3)}stopTimeUpdate(){this.updateTimer&&(clearInterval(this.updateTimer),this.updateTimer=null)}startFadeAnimation(){this.fadeTimer=setInterval((()=>{this.isAnimating=!this.isAnimating,this.requestUpdate()}),20*x)}stopFadeAnimation(){this.fadeTimer&&(clearInterval(this.fadeTimer),this.fadeTimer=null)}updateTime(){try{var n=new Date;this.currentTime=this.formatTime(n),this.error=null}catch(n){console.error("Error updating time:",n),this.error="Error updating time"}this.requestUpdate()}formatTime(n){return n.toLocaleTimeString("en-US",X).replace(/\s?[AP]M/,"")}handleTouchStart(n){this.touchStartY=n.touches[0].clientY}handleTouchMove(n){if(this.touchStartY){var e=n.touches[0].clientY;this.touchStartY-e>50&&this.dispatchEvent(new CustomEvent("exit-night-mode",{bubbles:!0,composed:!0}))}}handleTouchEnd(){this.touchStartY=null}getAnimationClass(){return this.isAnimating?"fade-dim":""}renderTime(){return t(en||(en=d(['\n      <div class="night-time ','">\n        ',"\n      </div>\n    "])),this.getAnimationClass(),this.currentTime)}renderError(){return this.error?t(tn||(tn=d(['\n      <div class="error-message">\n        ',"\n      </div>\n    "])),this.error):null}render(){return t(rn||(rn=d(['\n      <div class="night-mode"\n           @touchstart="','"\n           @touchmove="','"\n           @touchend="','">\n        ',"\n        ","\n      </div>\n    "])),this.handleTouchStart,this.handleTouchMove,this.handleTouchEnd,this.renderTime(),this.renderError())}setBrightness(n){this.brightness=Math.max(I,Math.min(T,n)),this.requestUpdate()}forceUpdate(){this.updateTime()}toggleAnimation(){this.fadeTimer?this.stopFadeAnimation():this.startFadeAnimation()}handleError(n){this.error=n.message,this.requestUpdate();var e=new CustomEvent("night-mode-error",{detail:{error:n},bubbles:!0,composed:!0});this.dispatchEvent(e)}});var on,dn,ln,hn,cn,mn,gn,un,pn,fn,bn,vn=n(an||(an=d(['\n  :host {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    --overlay-height: 120px;\n    --icon-size: 50px;\n    --border-radius: 20px;\n    --transition-timing: 0.3s ease-in-out;\n    font-family: "Product Sans Regular", "Rubik", sans-serif;\n  }\n\n  /* Base Control Container */\n  .controls-container {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 1000;\n    touch-action: none;\n  }\n\n  /* Main Overlay */\n  .overlay {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: var(--overlay-height);\n    background-color: rgba(255, 255, 255, 0.95);\n    color: #333;\n    box-sizing: border-box;\n    transition: transform var(--transition-timing);\n    transform: translateY(100%);\n    z-index: 1000;\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-top-left-radius: var(--border-radius);\n    border-top-right-radius: var(--border-radius);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n  }\n\n  .overlay.show {\n    transform: translateY(0);\n  }\n\n  /* Icon Container */\n  .icon-container {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .icon-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 85%;\n    max-width: 500px;\n  }\n\n  /* Icon Buttons */\n  .icon-button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #333;\n    padding: 10px;\n    border-radius: 50%;\n    transition: background-color 0.2s ease, transform 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    outline: none;\n  }\n\n  .icon-button:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  .icon-button:active {\n    transform: scale(0.95);\n  }\n\n  .icon-button:focus-visible {\n    box-shadow: 0 0 0 2px #333;\n  }\n\n  iconify-icon {\n    font-size: var(--icon-size);\n    display: block;\n    width: var(--icon-size);\n    height: var(--icon-size);\n    transition: transform 0.2s ease;\n  }\n\n  /* Brightness and Volume Cards */\n  .brightness-card,\n  .volume-card {\n    position: fixed;\n    bottom: 20px;\n    left: 20px;\n    right: 20px;\n    background-color: rgba(255, 255, 255, 0.95);\n    border-radius: var(--border-radius);\n    padding: 40px 20px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    z-index: 1001;\n    transform: translateY(calc(100% + 20px));\n    transition: transform var(--transition-timing);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    max-width: 600px;\n    margin: 0 auto;\n  }\n\n  .brightness-card.show,\n  .volume-card.show {\n    transform: translateY(0);\n  }\n\n  /* Control Sliders */\n  .brightness-control,\n  .volume-control {\n    display: flex;\n    align-items: center;\n    width: 100%;\n  }\n\n  .brightness-dots-container,\n  .volume-dots-container {\n    flex-grow: 1;\n    margin-right: 10px;\n    padding: 0 10px;\n    touch-action: none;\n  }\n\n  .brightness-dots,\n  .volume-dots {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 30px;\n    position: relative;\n  }\n\n  /* Dots */\n  .brightness-dot,\n  .volume-dot {\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    background-color: #d1d1d1;\n    transition: background-color 0.2s ease, transform 0.2s ease;\n    cursor: pointer;\n    position: relative;\n  }\n\n  .brightness-dot.active,\n  .volume-dot.active {\n    background-color: #333;\n    transform: scale(1.1);\n  }\n\n  /* Value Display */\n  .brightness-value,\n  .volume-value {\n    min-width: 60px;\n    text-align: right;\n    font-size: 40px;\n    color: black;\n    font-weight: 300;\n    margin-right: 20px;\n    transition: color 0.2s ease;\n  }\n\n  /* Progress Bar */\n  .progress-bar {\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    height: 2px;\n    background-color: #333;\n    transition: width 0.1s ease-out;\n  }\n\n  /* Loading States */\n  .loading {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n\n  @keyframes pulse {\n    0%, 100% {\n      opacity: 0.5;\n    }\n    50% {\n      opacity: 0.8;\n    }\n  }\n\n  .loading .brightness-dot,\n  .loading .volume-dot {\n    animation: pulse 1.5s infinite;\n  }\n\n  /* Error States */\n  .error-message {\n    position: fixed;\n    bottom: 100px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: rgba(255, 59, 48, 0.9);\n    color: white;\n    padding: 8px 16px;\n    border-radius: 8px;\n    font-size: 14px;\n    z-index: 1002;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n    animation: slideUp 0.3s ease-out;\n  }\n\n  @keyframes slideUp {\n    from {\n      transform: translate(-50%, 20px);\n      opacity: 0;\n    }\n    to {\n      transform: translate(-50%, 0);\n      opacity: 1;\n    }\n  }\n\n  /* Responsive Design */\n  @media (max-width: 768px) {\n    .icon-row {\n      width: 95%;\n    }\n\n    .brightness-card,\n    .volume-card {\n      bottom: 10px;\n      left: 10px;\n      right: 10px;\n      padding: 30px 15px;\n    }\n\n    .brightness-value,\n    .volume-value {\n      font-size: 32px;\n      min-width: 50px;\n      margin-right: 15px;\n    }\n  }\n\n  @media (max-width: 480px) {\n    --overlay-height: 100px;\n    --icon-size: 40px;\n\n    .brightness-dot,\n    .volume-dot {\n      width: 10px;\n      height: 10px;\n    }\n\n    .brightness-value,\n    .volume-value {\n      font-size: 28px;\n      min-width: 40px;\n      margin-right: 10px;\n    }\n  }\n\n  /* Dark Mode Support */\n  @media (prefers-color-scheme: dark) {\n    .overlay,\n    .brightness-card,\n    .volume-card {\n      background-color: rgba(30, 30, 30, 0.95);\n    }\n\n    .icon-button {\n      color: white;\n    }\n\n    .brightness-dot,\n    .volume-dot {\n      background-color: #666;\n    }\n\n    .brightness-dot.active,\n    .volume-dot.active {\n      background-color: white;\n    }\n\n    .brightness-value,\n    .volume-value {\n      color: white;\n    }\n\n    .progress-bar {\n      background-color: white;\n    }\n  }\n\n  /* High Contrast Mode */\n  @media (prefers-contrast: more) {\n    .overlay,\n    .brightness-card,\n    .volume-card {\n      background-color: black;\n    }\n\n    .icon-button {\n      color: white;\n    }\n\n    .brightness-dot,\n    .volume-dot {\n      border: 1px solid white;\n    }\n\n    .brightness-value,\n    .volume-value {\n      color: white;\n    }\n  }\n\n  /* Reduced Motion */\n  @media (prefers-reduced-motion: reduce) {\n    .overlay,\n    .brightness-card,\n    .volume-card {\n      transition: none;\n    }\n\n    .icon-button,\n    .brightness-dot,\n    .volume-dot {\n      transition: none;\n    }\n\n    .loading .brightness-dot,\n    .loading .volume-dot {\n      animation: none;\n    }\n  }\n\n  /* Touch Screen Optimization */\n  @media (hover: none) {\n    .icon-button:hover {\n      background-color: transparent;\n    }\n\n    .brightness-dots,\n    .volume-dots {\n      height: 44px;\n    }\n\n    .brightness-dot,\n    .volume-dot {\n      width: 16px;\n      height: 16px;\n    }\n  }\n\n  /* RTL Support */\n  :host([dir="rtl"]) {\n    .brightness-dots-container,\n    .volume-dots-container {\n      margin-right: 0;\n      margin-left: 10px;\n    }\n\n    .brightness-value,\n    .volume-value {\n      text-align: left;\n      margin-right: 0;\n      margin-left: 20px;\n    }\n  }\n\n  /* Accessibility */\n  .screen-reader-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n\n  /* Focus States */\n  :host(:focus-within) {\n    outline: none;\n  }\n\n  /* Print Mode */\n  @media print {\n    .controls-container {\n      display: none;\n    }\n  }\n'])));customElements.define("google-controls",class extends e{static get properties(){return{hass:{type:Object},brightness:{type:Number},visualBrightness:{type:Number},showBrightnessCard:{type:Boolean},brightnessCardTransition:{type:String},volume:{type:Number},visualVolume:{type:Number},showVolumeCard:{type:Boolean},volumeCardTransition:{type:String},showOverlay:{type:Boolean},isAdjustingBrightness:{type:Boolean},isAdjustingVolume:{type:Boolean},error:{type:String},touchStartY:{type:Number},longPressTimer:{type:Number}}}constructor(){super(),this.initializeProperties()}initializeProperties(){this.brightness=y,this.visualBrightness=y,this.volume=C,this.visualVolume=C,this.showOverlay=!1,this.showBrightnessCard=!1,this.showVolumeCard=!1,this.brightnessCardTransition="none",this.volumeCardTransition="none",this.isAdjustingBrightness=!1,this.isAdjustingVolume=!1,this.touchStartY=null,this.longPressTimer=null,this.overlayDismissTimer=null,this.brightnessCardDismissTimer=null,this.volumeCardDismissTimer=null,this.error=null}static get styles(){return vn}startOverlayDismissTimer(){this.clearOverlayDismissTimer(),this.overlayDismissTimer=setTimeout((()=>{this.dismissOverlay()}),f)}clearOverlayDismissTimer(){this.overlayDismissTimer&&(clearTimeout(this.overlayDismissTimer),this.overlayDismissTimer=null)}startBrightnessCardDismissTimer(){this.clearBrightnessCardDismissTimer(),this.brightnessCardDismissTimer=setTimeout((()=>{this.dismissBrightnessCard()}),f)}clearBrightnessCardDismissTimer(){this.brightnessCardDismissTimer&&(clearTimeout(this.brightnessCardDismissTimer),this.brightnessCardDismissTimer=null)}startVolumeCardDismissTimer(){this.clearVolumeCardDismissTimer(),this.volumeCardDismissTimer=setTimeout((()=>{this.dismissVolumeCard()}),f)}clearVolumeCardDismissTimer(){this.volumeCardDismissTimer&&(clearTimeout(this.volumeCardDismissTimer),this.volumeCardDismissTimer=null)}updateBrightnessValue(n){var e=this;return r((function*(){e.isAdjustingBrightness=!0,e.visualBrightness=Math.max(I,Math.min(w,Math.round(n)));try{yield e.setBrightness(n),e.startBrightnessCardDismissTimer()}catch(n){e.handleError("Failed to update brightness",n),e.visualBrightness=e.brightness}e.requestUpdate()}))()}setBrightness(n){var e=this;return r((function*(){if(!e.hass)throw new Error("Home Assistant not available");var t=Math.max(I,Math.min(w,Math.round(n)));yield e.hass.callService("notify","mobile_app_liam_s_room_display",{message:"command_screen_brightness_level",data:{command:t}}),yield e.hass.callService("notify","mobile_app_liam_s_room_display",{message:"command_update_sensors"}),e.brightness=t,e.emitBrightnessChange(t)}))()}updateVolumeValue(n){var e=this;return r((function*(){e.isAdjustingVolume=!0,e.visualVolume=Math.max(z,Math.min(S,Math.round(n)));try{yield e.setVolume(n),e.startVolumeCardDismissTimer()}catch(n){e.handleError("Failed to update volume",n),e.visualVolume=e.volume}e.requestUpdate()}))()}setVolume(n){var e=this;return r((function*(){if(!e.hass)throw new Error("Home Assistant not available");var t=Math.max(z,Math.min(S,Math.round(n)));yield e.hass.callService("notify","mobile_app_liam_s_room_display",{message:"command_volume_level",data:{media_stream:"system_stream",command:t}}),yield e.hass.callService("notify","mobile_app_liam_s_room_display",{message:"command_play_sound",data:{sound:"volume_change"}}),e.volume=t,e.emitVolumeChange(t)}))()}handleBrightnessChange(n){var e=n.target.closest(".brightness-dot");if(e){var t=parseInt(e.dataset.value);this.updateBrightnessValue(t*(w/k))}}handleVolumeChange(n){var e=n.target.closest(".volume-dot");if(e){var t=parseInt(e.dataset.value);this.updateVolumeValue(t*(S/D))}}handleBrightnessDrag(n){var e=this;return r((function*(){var t=e.shadowRoot.querySelector(".brightness-dots").getBoundingClientRect(),i=n.type.includes("touch")?n.touches[0].clientX:n.clientX,r=Math.max(0,Math.min(i-t.left,t.width)),a=Math.round(r/t.width*k);yield e.updateBrightnessValue(a*(w/k))}))()}handleVolumeDrag(n){var e=this;return r((function*(){var t=e.shadowRoot.querySelector(".volume-dots").getBoundingClientRect(),i=n.type.includes("touch")?n.touches[0].clientX:n.clientX,r=Math.max(0,Math.min(i-t.left,t.width)),a=Math.round(r/t.width*D);yield e.updateVolumeValue(a*(S/D))}))()}handleTouchStart(n){this.touchStartY=n.touches[0].clientY}handleTouchMove(n){if(this.touchStartY){n.preventDefault();var e=this.touchStartY-n.touches[0].clientY;Math.abs(e)>B&&(e>0?(this.showOverlay=!0,this.startOverlayDismissTimer()):this.dismissAllCards(),this.touchStartY=null)}}handleTouchEnd(){this.touchStartY=null}handleSettingsIconTouchStart(){this.longPressTimer=setTimeout((()=>{this.emitDebugToggle()}),b)}handleSettingsIconTouchEnd(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}dismissOverlay(){this.showOverlay=!1,this.clearOverlayDismissTimer(),this.requestUpdate()}dismissBrightnessCard(){this.brightnessCardTransition="transform 0.3s ease-in-out",this.showBrightnessCard=!1,this.clearBrightnessCardDismissTimer(),this.requestUpdate()}dismissVolumeCard(){this.volumeCardTransition="transform 0.3s ease-in-out",this.showVolumeCard=!1,this.clearVolumeCardDismissTimer(),this.requestUpdate()}dismissAllCards(){this.dismissOverlay(),this.dismissBrightnessCard(),this.dismissVolumeCard()}toggleBrightnessCard(){this.showBrightnessCard?this.dismissBrightnessCard():(this.showOverlay=!1,this.showVolumeCard=!1,this.brightnessCardTransition="none",this.showBrightnessCard=!0,this.startBrightnessCardDismissTimer()),this.requestUpdate()}toggleVolumeCard(){this.showVolumeCard?this.dismissVolumeCard():(this.showOverlay=!1,this.showBrightnessCard=!1,this.volumeCardTransition="none",this.showVolumeCard=!0,this.startVolumeCardDismissTimer()),this.requestUpdate()}emitBrightnessChange(n){var e=new CustomEvent("brightness-change",{detail:{brightness:n},bubbles:!0,composed:!0});this.dispatchEvent(e)}emitVolumeChange(n){var e=new CustomEvent("volume-change",{detail:{volume:n},bubbles:!0,composed:!0});this.dispatchEvent(e)}emitDebugToggle(){var n=new CustomEvent("debug-toggle",{bubbles:!0,composed:!0});this.dispatchEvent(n)}handleError(n,e){console.error(n,e),this.error=n,this.requestUpdate();var t=new CustomEvent("control-error",{detail:{error:n},bubbles:!0,composed:!0});this.dispatchEvent(t)}renderOverlay(){return t(on||(on=d(['\n      <div class="overlay ','">\n        <div class="icon-container">\n          <div class="icon-row">\n            <button class="icon-button" @click="','">\n              <iconify-icon icon="material-symbols-light:sunny-outline-rounded"></iconify-icon>\n            </button>\n            <button class="icon-button" @click="','">\n              <iconify-icon icon="material-symbols-light:volume-up-outline-rounded"></iconify-icon>\n            </button>\n            <button class="icon-button">\n              <iconify-icon icon="material-symbols-light:do-not-disturb-on-outline-rounded"></iconify-icon>\n            </button>\n            <button class="icon-button">\n              <iconify-icon icon="material-symbols-light:alarm-add-outline-rounded"></iconify-icon>\n            </button>\n            <button class="icon-button"\n              @touchstart="','"\n              @touchend="','"\n              @touchcancel="','">\n              <iconify-icon icon="material-symbols-light:settings-outline-rounded"></iconify-icon>\n            </button>\n          </div>\n        </div>\n      </div>\n    '])),this.showOverlay?"show":"",this.toggleBrightnessCard,this.toggleVolumeCard,this.handleSettingsIconTouchStart,this.handleSettingsIconTouchEnd,this.handleSettingsIconTouchEnd)}renderBrightnessCard(){var n=Math.round(this.visualBrightness/(w/k));return t(dn||(dn=d(['\n      <div class="brightness-card ','" \n           style="transition: ',';">\n        <div class="brightness-control">\n          <div class="brightness-dots-container">\n            <div class="brightness-dots" \n                 @click="','"\n                 @mousedown="','"\n                 @mousemove="','"\n                 @touchstart="','"\n                 @touchmove="','">\n              ','\n            </div>\n          </div>\n          <span class="brightness-value">',"</span>\n        </div>\n      </div>\n    "])),this.showBrightnessCard?"show":"",this.brightnessCardTransition,this.handleBrightnessChange,this.handleBrightnessDrag,(n=>1===n.buttons&&this.handleBrightnessDrag(n)),this.handleBrightnessDrag,this.handleBrightnessDrag,[...Array(k)].map(((e,i)=>t(ln||(ln=d(['\n                <div class="brightness-dot ','" \n                     data-value="','">\n                </div>\n              '])),i<n?"active":"",i+1))),n)}renderVolumeCard(){var n=Math.round(this.visualVolume/(S/D));return t(hn||(hn=d(['\n      <div class="volume-card ','" \n           style="transition: ',';">\n        <div class="volume-control">\n          <div class="volume-dots-container">\n            <div class="volume-dots" \n                 @click="','"\n                 @mousedown="','"\n                 @mousemove="','"\n                 @touchstart="','"\n                 @touchmove="','">\n              ','\n            </div>\n          </div>\n          <span class="volume-value">',"</span>\n        </div>\n      </div>\n    "])),this.showVolumeCard?"show":"",this.volumeCardTransition,this.handleVolumeChange,this.handleVolumeDrag,(n=>1===n.buttons&&this.handleVolumeDrag(n)),this.handleVolumeDrag,this.handleVolumeDrag,[...Array(D)].map(((e,i)=>t(cn||(cn=d(['\n                <div class="volume-dot ','" \n                     data-value="','">\n                </div>\n              '])),i<n?"active":"",i+1))),n)}renderError(){return this.error?t(mn||(mn=d(['\n      <div class="error-message">\n        ',"\n      </div>\n    "])),this.error):null}render(){return t(gn||(gn=d(['\n      <div class="controls-container"\n           @touchstart="','"\n           @touchmove="','"\n           @touchend="','">\n        ',"\n        ","\n        ","\n        ","\n      </div>\n    "])),this.handleTouchStart,this.handleTouchMove,this.handleTouchEnd,this.renderError(),this.showBrightnessCard||this.showVolumeCard?"":this.renderOverlay(),this.renderBrightnessCard(),this.renderVolumeCard())}setBrightnessValue(n){this.brightness=n,this.visualBrightness=n,this.requestUpdate()}setVolumeValue(n){this.volume=n,this.visualVolume=n,this.requestUpdate()}showBrightnessAdjustment(){this.toggleBrightnessCard()}showVolumeAdjustment(){this.toggleVolumeCard()}hideAllControls(){this.dismissAllCards()}disconnectedCallback(){super.disconnectedCallback(),this.clearAllTimers()}clearAllTimers(){this.clearOverlayDismissTimer(),this.clearBrightnessCardDismissTimer(),this.clearVolumeCardDismissTimer(),this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}});class xn extends e{static get properties(){return{hass:{type:Object},config:{type:Object},currentImageIndex:{type:Number},imageList:{type:Array},imageA:{type:String},imageB:{type:String},activeImage:{type:String},preloadedImage:{type:String},isTransitioning:{type:Boolean},screenWidth:{type:Number},screenHeight:{type:Number},error:{type:String},debugInfo:{type:Object},showDebugInfo:{type:Boolean},showOverlay:{type:Boolean},isNightMode:{type:Boolean},previousBrightness:{type:Number},isInNightMode:{type:Boolean},brightness:{type:Number},volume:{type:Number}}}constructor(){super(),this.initializeProperties(),this.boundUpdateScreenSize=this.updateScreenSize.bind(this)}initializeProperties(){this.currentImageIndex=-1,this.imageList=[],this.imageA="",this.imageB="",this.activeImage="A",this.preloadedImage="",this.isTransitioning=!1,this.showOverlay=!1,this.showDebugInfo=!1,this.error=null,this.debugInfo={},this.brightness=y,this.volume=VOLUME.DEFAULT,this.isNightMode=!1,this.previousBrightness=y,this.isInNightMode=!1,this.updateScreenSize()}static get styles(){return u}setConfig(n){if(!n.image_url)throw new Error("You need to define an image_url");this.config=o(o({},R),n),this.urlTemplate=this.config.image_url,this.showDebugInfo=this.config.show_debug,this.debugInfo.config=this.config}connectedCallback(){super.connectedCallback(),this.setupEventListeners(),this.startTimers()}disconnectedCallback(){super.disconnectedCallback(),this.cleanupEventListeners(),this.clearTimers()}setupEventListeners(){window.addEventListener("resize",this.boundUpdateScreenSize)}cleanupEventListeners(){window.removeEventListener("resize",this.boundUpdateScreenSize)}startTimers(){this.updateImageList(),this.startImageRotation(),this.imageListUpdateInterval=setInterval((()=>{this.updateImageList()}),1e3*this.config.image_list_update_interval)}clearTimers(){clearInterval(this.imageUpdateInterval),clearInterval(this.imageListUpdateInterval)}updateImageList(){var n=this;return r((function*(){if(!n.screenWidth||!n.screenHeight)return n.error="Screen dimensions not set",void n.requestUpdate();try{var e=yield n.fetchImageList();n.imageList="random"===n.config.image_order?n.shuffleArray(e):e.sort(),n.error=null,n.debugInfo.imageList=n.imageList}catch(e){n.error="Error updating image list: ".concat(e.message)}n.requestUpdate()}))()}shuffleArray(n){return[...n].sort((()=>.5-Math.random()))}fetchImageList(){var n=this;return r((function*(){switch(n.getImageSourceType()){case P:return n.getImagesFromMediaSource();case q:return n.getImagesFromUnsplashAPI();case L:return n.getImagesFromImmichAPI();default:return[n.getImageUrl()]}}))()}getImageSourceType(){var{image_url:n}=this.config;return n.startsWith("media-source://")?P:n.startsWith("https://api.unsplash")?q:n.startsWith("immich+")?L:n.includes("picsum.photos")?N:j}getImageUrl(){var n=Date.now();return this.urlTemplate.replace(/\${width}/g,this.screenWidth).replace(/\${height}/g,this.screenHeight).replace(/\${timestamp_ms}/g,n).replace(/\${timestamp}/g,Math.floor(n/1e3))}updateScreenSize(){var n=window.devicePixelRatio||1;this.screenWidth=Math.round(window.innerWidth*n),this.screenHeight=Math.round(window.innerHeight*n),this.updateImageList()}startImageRotation(){this.updateImage(),this.imageUpdateInterval=setInterval((()=>{this.updateImage()}),1e3*this.config.display_time)}updateImage(){var n=this;return r((function*(){if(!n.isTransitioning)try{var e=yield n.getNextImage();yield n.transitionToNewImage(e),n.preloadNextImage()}catch(e){console.error("Error updating image:",e),n.error="Error updating image: ".concat(e.message),n.requestUpdate()}}))()}getNextImage(){var n=this;return r((function*(){if(n.preloadedImage){var e=n.preloadedImage;return n.preloadedImage="",e}return n.getImageSourceType()===N?n.getImageUrl():(n.currentImageIndex=(n.currentImageIndex+1)%n.imageList.length,n.imageList[n.currentImageIndex])}))()}preloadImage(n){return r((function*(){return new Promise(((e,t)=>{var i=new Image;i.onload=()=>e(n),i.onerror=()=>t(new Error("Failed to load image: ".concat(n))),i.src=n}))}))()}preloadNextImage(){var n=this;return r((function*(){try{var e=n.getImageSourceType()===N?n.getImageUrl():n.imageList[(n.currentImageIndex+1)%n.imageList.length];n.preloadedImage=yield n.preloadImage(e)}catch(e){console.error("Error preloading next image:",e),n.preloadedImage=""}}))()}handleBrightnessChange(n){this.brightness=n.detail.brightness,this.requestUpdate()}handleVolumeChange(n){this.volume=n.detail.volume,this.requestUpdate()}updateNightMode(){var n=this;return r((function*(){var e;if(null!==(e=n.hass)&&void 0!==e&&e.states[F]){var t=n.hass.states[F],i=0===parseInt(t.state);i!==n.isInNightMode&&(i?yield n.enterNightMode():yield n.exitNightMode(),n.isInNightMode=i,n.isNightMode=i,n.requestUpdate())}}))()}renderDebugInfo(){return this.showDebugInfo?t(un||(un=d(['\n      <div class="debug-info">\n        <h2>Background Card Debug Info</h2>\n        <p><strong>Night Mode:</strong> ',"</p>\n        <p><strong>Screen Width:</strong> ","</p>\n        <p><strong>Screen Height:</strong> ","</p>\n        <p><strong>Current Image:</strong> ","</p>\n        <p><strong>Is Transitioning:</strong> ","</p>\n        <p><strong>Brightness:</strong> ","</p>\n        <p><strong>Volume:</strong> ","</p>\n        <h3>Config:</h3>\n        <pre>","</pre>\n      </div>\n    "])),this.isNightMode,this.screenWidth,this.screenHeight,"A"===this.activeImage?this.imageA:this.imageB,this.isTransitioning,this.brightness,this.volume,JSON.stringify(this.config,null,2)):null}render(){return this.isNightMode?t(pn||(pn=d(['\n        <night-mode\n          .currentTime="','">\n        </night-mode>\n      '])),(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/\s?[AP]M/,"")):t(fn||(fn=d(['\n      <background-rotator\n        .imageA="','"\n        .imageB="','"\n        .activeImage="','"\n        .isTransitioning="','"\n        .crossfadeTime="','">\n      </background-rotator>\n      \n      <weather-display\n        .hass="','">\n      </weather-display>\n      \n      <google-controls\n        .brightness="','"\n        .volume="','"\n        .showOverlay="','"\n        @brightness-change="','"\n        @volume-change="','">\n      </google-controls>\n\n      ',"\n      ","\n    "])),this.imageA,this.imageB,this.activeImage,this.isTransitioning,this.config.crossfade_time,this.hass,this.brightness,this.volume,this.showOverlay,this.handleBrightnessChange,this.handleVolumeChange,this.error?t(bn||(bn=d(['<div class="error">',"</div>"])),this.error):"",this.renderDebugInfo())}}customElements.define("google-card",xn),window.customCards=window.customCards||[],window.customCards.push({type:"google-card",name:"Google Card",description:"A card to mimic nest display"});export{xn as GoogleCard};
